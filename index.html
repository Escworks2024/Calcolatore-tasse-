<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calcolo Regime Forfettario</title>
    <style>
        table {
            width: 100%;
            border-collapse: collapse;
        }
        table, th, td {
            border: 1px solid black;
        }
        th, td {
            padding: 10px;
            text-align: center;
        }
        input {
            width: 100%;
            box-sizing: border-box;
        }
    </style>
</head>
<body>

<h2>Calcolo Regime Forfettario</h2>

<table>
    <thead>
        <tr>
            <th>Parametro</th>
            <th>Valore</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>Fatturato (€)</td>
            <td><input type="number" id="fatturato" oninput="calcola()"></td>
        </tr>
        <tr>
            <td>Coefficiente di Redditività (%)</td>
            <td><input type="number" id="coefficiente-redditivita" value="40" oninput="calcola()"></td>
        </tr>
        <tr>
            <td>Tassazione (%)</td>
            <td><input type="number" id="tassazione" value="15" oninput="calcola()"></td>
        </tr>
        <tr>
            <td>INPS Fisso (€ ogni tre mesi)</td>
            <td><input type="number" id="inps-fisso-trimestrale" value="850" oninput="calcola()"></td>
        </tr>
        <tr>
            <td>Soglia INPS Eccedenza (€)</td>
            <td><input type="number" id="soglia-inps-eccedenza" value="15000" oninput="calcola()"></td>
        </tr>
        <tr>
            <td>Aliquota INPS Eccedenza (%)</td>
            <td><input type="number" id="aliquota-inps-eccedenza" value="25" oninput="calcola()"></td>
        </tr>
    </tbody>
</table>

<h3>Risultati</h3>
<table>
    <thead>
        <tr>
            <th>Descrizione</th>
            <th>Valore (€)</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>Reddito Imponibile</td>
            <td id="reddito-imponibile"></td>
        </tr>
        <tr>
            <td>Tasse</td>
            <td id="tasse"></td>
        </tr>
        <tr>
            <td>INPS Fisso (Annuale)</td>
            <td id="inps-fisso-annuo"></td>
        </tr>
        <tr>
            <td>INPS Eccedenza</td>
            <td id="inps-eccedenza"></td>
        </tr>
        <tr>
            <td>Reddito Netto</td>
            <td id="reddito-netto"></td>
        </tr>
    </tbody>
</table>

<script>
    function calcola() {
        // Recupera i valori inseriti dall'utente
        const fatturato = parseFloat(document.getElementById('fatturato').value) || 0;
        const coefficienteRedditivita = parseFloat(document.getElementById('coefficiente-redditivita').value) || 0;
        const tassazione = parseFloat(document.getElementById('tassazione').value) || 0;
        const inpsFissoTrimestrale = parseFloat(document.getElementById('inps-fisso-trimestrale').value) || 0;
        const sogliaInpsEccedenza = parseFloat(document.getElementById('soglia-inps-eccedenza').value) || 0;
        const aliquotaInpsEccedenza = parseFloat(document.getElementById('aliquota-inps-eccedenza').value) || 0;

        // Calcola il reddito imponibile
        const redditoImponibile = fatturato * (coefficienteRedditivita / 100);

        // Calcola le tasse
        const tasse = redditoImponibile * (tassazione / 100);

        // Calcola l'INPS fisso annuale (850 € ogni tre mesi = 3.400 € all'anno)
        const inpsFissoAnnuale = inpsFissoTrimestrale * 4;

        // Calcola l'INPS eccedenza (25% sul reddito netto superiore a 15.000 €)
        let inpsEccedenza = 0;
        const redditoNettoPrimaDiINPS = redditoImponibile - tasse;
        if (redditoNettoPrimaDiINPS > sogliaInpsEccedenza) {
            inpsEccedenza = (redditoNettoPrimaDiINPS - sogliaInpsEccedenza) * (aliquotaInpsEccedenza / 100);
        }

        // Calcola il reddito netto finale
        const redditoNetto = redditoNettoPrimaDiINPS - inpsFissoAnnuale - inpsEccedenza;

        // Aggiorna i risultati nella tabella
        document.getElementById('reddito-imponibile').textContent = redditoImponibile.toFixed(2);
        document.getElementById('tasse').textContent = tasse.toFixed(2);
        document.getElementById('inps-fisso-annuo').textContent = inpsFissoAnnuale.toFixed(2);
        document.getElementById('inps-eccedenza').textContent = inpsEccedenza.toFixed(2);
        document.getElementById('reddito-netto').textContent = redditoNetto.toFixed(2);
    }

    // Esegui il calcolo iniziale
    calcola();
</script>

</body>
</html>
